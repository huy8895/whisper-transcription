name: Adjust Audio Speed

on:
  workflow_dispatch:
    inputs:
      input_filename:
        description: 'TÃªn file .mp3 trong thÆ° má»¥c audio (vÃ­ dá»¥: lesson1.mp3)'
        required: true
      speed:
        description: 'Tá»‘c Ä‘á»™ mong muá»‘n (vÃ­ dá»¥: 0.8 = cháº­m hÆ¡n, 1.2 = nhanh hÆ¡n)'
        required: true
        default: '1.0'

jobs:
  adjust-speed:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¦ Checkout source code
        uses: actions/checkout@v3

      - name: ğŸ” Kiá»ƒm tra file Ä‘áº§u vÃ o
        run: |
          ls -lh audio/
          echo "ğŸ§ Input file: audio/${{ github.event.inputs.input_filename }}"
          echo "ğŸš€ Speed factor: ${{ github.event.inputs.speed }}"

      - name: ğŸ› ï¸ CÃ i ffmpeg
        run: sudo apt-get update && sudo apt-get install -y ffmpeg

      - name: ğŸ›ï¸ Chá»‰nh tá»‘c Ä‘á»™ file audio
        run: |
          mkdir -p adjusted
          ffmpeg -i "audio/${{ github.event.inputs.input_filename }}" \
            -filter:a "atempo=${{ github.event.inputs.speed }}" \
            -vn "adjusted/adjusted_${{ github.event.inputs.speed }}x_${{ github.event.inputs.input_filename }}"

      - name: â¬†ï¸ Upload audio Ä‘Ã£ Ä‘iá»u chá»‰nh
        uses: actions/upload-artifact@v4
        with:
          name: adjusted-audio
          path: adjusted/*.mp3
